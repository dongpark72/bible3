<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>내 손안의 성경 - 개역개정 Premium</title>
    <link rel="stylesheet" href="styles.css?v=1.1">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Nanum+Myeongjo:wght@400;700&family=Outfit:wght@300;400;600&display=swap"
        rel="stylesheet">
    <meta name="description" content="언제 어디서나 함께하는 나만의 프리미엄 성경 웹 페이지">
</head>

<body>
    <div id="app">
        <!-- Sidebar for Book Selection -->
        <aside id="sidebar" class="glass-panel">
            <div class="sidebar-header">
                <div class="header-top">
                    <h1>성경 <span style="font-size:0.5em; vertical-align:middle; opacity:0.7;">개역개정</span></h1>
                    <button id="logout-btn" class="nav-btn small hidden">로그아웃</button>
                </div>
                <div class="sidebar-tabs">
                    <button id="tab-plan" class="tab-btn active" title="읽기표">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                            <line x1="16" y1="2" x2="16" y2="6"></line>
                            <line x1="8" y1="2" x2="8" y2="6"></line>
                            <line x1="3" y1="10" x2="21" y2="10"></line>
                        </svg>
                    </button>
                    <button id="tab-books" class="tab-btn" title="목록">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                            <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
                        </svg>
                    </button>
                    <button id="tab-history" class="tab-btn" title="히스토리">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="10"></circle>
                            <polyline points="12 6 12 12 16 14"></polyline>
                        </svg>
                    </button>
                    <button id="tab-social" class="tab-btn" title="소셜">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                            <circle cx="9" cy="7" r="4"></circle>
                            <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                            <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                        </svg>
                    </button>
                </div>
                <div class="search-box">
                    <input type="text" id="book-search-input" class="hidden" placeholder="권 이름 검색 (예: 창, 마, 요)...">
                    <input type="text" id="search-input" placeholder="말씀 검색...">
                </div>
            </div>
            <div id="sidebar-content">
                <nav id="books-list" class="tab-content hidden"></nav>
                <div id="history-list" class="tab-content hidden"></div>
                <div id="reading-plan" class="tab-content">
                    <div class="plan-header">
                        <h3>성경 완독 계획</h3>
                        <button id="setup-plan-btn" class="nav-btn small">설정</button>
                    </div>
                    <div id="plan-status"></div>
                    <div id="plan-calendar-container" class="calendar-wrapper">
                        <div class="calendar-header">
                            <button id="prev-month">◀</button>
                            <h4 id="calendar-month-year"></h4>
                            <button id="next-month">▶</button>
                        </div>
                        <div class="calendar-grid" id="calendar-grid">
                            <!-- Calendar days will be rendered here -->
                        </div>
                    </div>
                </div>
                <div id="social-content" class="tab-content hidden">
                    <div id="auth-section">
                        <h4>로그인 / 시작하기</h4>
                        <div class="auth-inputs">
                            <input type="text" id="username-input" placeholder="사용자 이름">
                            <input type="password" id="password-input" placeholder="원하시는 숫자 4자리">
                            <button id="login-btn" class="nav-btn primary">로그인</button>
                            <p
                                style="font-size: 0.75rem; color: var(--secondary-text); margin-top: 0.5rem; text-align: center;">
                                * 처음이신가요? 원하는 이름으로 로그인하면 자동으로 시작됩니다.</p>
                        </div>
                    </div>
                    <div id="group-section" class="hidden">
                        <div class="user-info-header" style="margin-bottom: 1rem;">
                            <span id="user-display-name"></span>
                        </div>

                        <div class="social-section-header">나의 주간 진도</div>
                        <div id="my-daily-chart" class="daily-chart-container"></div>

                        <div class="social-section-header">멤버별 일일 현황</div>
                        <div id="group-members-list"></div>
                    </div>
                </div>
            </div>
            <div class="sidebar-footer">
                <button id="admin-btn" class="nav-btn hidden" style="margin-bottom: 5px;">📊 관리자</button>
                <button id="settings-btn" class="nav-btn">⚙️ 설정</button>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main id="content">
            <header id="top-nav">
                <div class="top-nav-first-row">
                    <button id="menu-toggle" class="icon-btn">☰</button>
                    <div id="current-location" class="clickable-location">
                        <span id="loc-book">창세기</span>
                        <span id="loc-chapter">1장</span>
                    </div>
                </div>
                <div class="top-nav-second-row">
                    <div class="top-actions" style="display:flex; gap:10px; align-items:center;">
                        <select id="aux-version-select"
                            style="padding: 5px; border-radius: 5px; font-size: 0.8rem; background: var(--card-bg); color: var(--text-color); border: 1px solid var(--border-color);">
                            <option value="">보조성경 선택</option>
                            <option value="niv">English (NIV)</option>
                            <option value="nlt">English (NLT)</option>
                            <option value="esv">English (ESV)</option>
                        </select>
                        <button id="wordbook-btn" class="icon-btn" title="단어장">📔</button>
                        <button id="theme-toggle" class="icon-btn">🌓</button>
                    </div>
                </div>
            </header>

            <article id="verse-display" class="fade-in">
                <!-- Verses will be dynamically loaded here -->
                <div class="loading-state">말씀을 불러오는 중입니다...</div>
            </article>

            <footer id="chapter-nav">
                <button id="prev-chapter" class="nav-btn" title="이전 장">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"
                        stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="15 18 9 12 15 6"></polyline>
                    </svg>
                    <span>이전 장</span>
                </button>
                <div id="chapter-selector-container">
                    <select id="chapter-selector"></select>
                </div>
                <button id="next-chapter" class="nav-btn" title="다음 장">
                    <span>다음 장</span>
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"
                        stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="9 18 15 12 9 6"></polyline>
                    </svg>
                </button>
            </footer>
        </main>
    </div>

    <!-- Login Modal (Overlay) -->
    <div id="login-overlay" class="hidden modal-overlay">
        <div class="modal-content glass-panel" style="max-width: 400px;">
            <header>
                <h2>성경 읽기 시작</h2>
            </header>
            <div class="auth-inputs">
                <input type="text" id="modal-username" placeholder="성함 (사용자 이름)">
                <input type="password" id="modal-password" placeholder="원하시는 숫자 4자리">
                <button id="modal-login-btn" class="nav-btn primary">로그인 / 시작하기</button>
                <p
                    style="font-size: 0.95rem; color: var(--secondary-text); margin-top: 1rem; text-align: center; font-weight: 500;">
                    성경 읽기에 오신 것을 환영합니다!</p>
            </div>
        </div>
    </div>

    <!-- Modals or Overlays -->
    <!-- Settings Modal -->
    <div id="settings-overlay" class="hidden modal-overlay">
        <div class="modal-content glass-panel">
            <header>
                <h2>환경 설정</h2>
                <button id="close-settings" class="icon-btn">✕</button>
            </header>
            <div class="settings-group">
                <label>글꼴 선택</label>
                <div class="font-options">
                    <button class="font-btn active" data-font="myeongjo">명조체</button>
                    <button class="font-btn" data-font="gothic">고딕체</button>
                </div>
            </div>
            <div class="settings-group">
                <label>글자 크기: <span id="font-size-val">1.25rem</span></label>
                <input type="range" id="font-size-slider" min="0.8" max="2" step="0.05" value="1.25">
            </div>
            <div class="settings-group">
                <label>줄 간격: <span id="line-height-val">1.7</span></label>
                <input type="range" id="line-height-slider" min="1.2" max="2.5" step="0.1" value="1.7">
            </div>
        </div>
    </div>

    <!-- Plan Setup Modal -->
    <div id="plan-setup-overlay" class="hidden modal-overlay">
        <div class="modal-content glass-panel">
            <header>
                <h2>읽기 계획 설정</h2>
                <button id="close-plan-setup" class="icon-btn">✕</button>
            </header>
            <div class="settings-group">
                <label>시작일</label>
                <input type="date" id="plan-start-date">
            </div>
            <div class="settings-group">
                <label>목표일</label>
                <input type="date" id="plan-end-date">
            </div>
            <button id="save-plan-btn" class="nav-btn primary">계획 저장</button>
        </div>
    </div>

    <!-- Admin Modal -->
    <div id="admin-overlay" class="hidden modal-overlay">
        <div class="modal-content glass-panel" style="max-width: 800px; width: 95%;">
            <header>
                <h2>성경 읽기 관리 대시보드</h2>
                <button id="close-admin" class="icon-btn">✕</button>
            </header>
            <div class="admin-actions"
                style="margin-bottom: 1.5rem; display: flex; justify-content: space-between; align-items: center;">
                <input type="text" id="admin-member-search" placeholder="멤버 이름 검색..." style="max-width: 250px;">
                <button id="export-csv-btn" class="nav-btn primary">📁 엑셀(CSV) 다운로드</button>
                <button id="admin-reset-btn" class="nav-btn" style="background:#ff7675; color:white;">🔄 전체 진도
                    리셋</button>
            </div>
            <div id="admin-stats-summary"
                style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 1.5rem;">
                <!-- Stats cards will go here -->
            </div>
            <div class="admin-table-wrapper"
                style="max-height: 400px; overflow-y: auto; border-radius: 12px; border: 1px solid rgba(0,0,0,0.05);">
                <table id="admin-member-table" style="width: 100%; border-collapse: collapse; font-size: 0.9rem;">
                    <thead style="background: rgba(212, 175, 55, 0.1); position: sticky; top: 0;">
                        <tr>
                            <th style="padding: 12px; text-align: left;">성함</th>
                            <th style="padding: 12px; text-align: center;">진도율</th>
                            <th style="padding: 12px; text-align: center;">읽은 장수</th>
                            <th style="padding: 12px; text-align: center;">오늘 분량</th>
                            <th style="padding: 12px; text-align: left;">마지막 위치</th>
                            <th style="padding: 12px; text-align: center;">관리</th>
                        </tr>
                    </thead>
                    <tbody id="admin-member-tbody">
                        <!-- Table rows will go here -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Wordbook Modal -->
    <div id="wordbook-overlay" class="hidden modal-overlay">
        <div class="modal-content glass-panel">
            <header>
                <h2>나의 단어장</h2>
                <button id="close-wordbook" class="icon-btn">✕</button>
            </header>
            <div id="wordbook-list" style="max-height: 400px; overflow-y: auto;">
                <!-- Words will be listed here -->
            </div>
            <p id="wordbook-empty" class="hidden" style="text-align: center; opacity: 0.6; padding: 2rem;">저장된 단어가 없습니다.
            </p>
        </div>
    </div>

    <!-- Bible Selector Overlay (Dual Pane) -->
    <div id="bible-selector-overlay" class="hidden modal-overlay">
        <div class="modal-content glass-panel"
            style="max-width: 800px; width: 95%; height: 85vh; max-height: 800px; display: flex; flex-direction: column; padding: 1.5rem; overflow: hidden;">
            <header
                style="margin-bottom: 1rem; flex-shrink: 0; display: flex; justify-content: space-between; align-items: center;">
                <h2 style="font-size: 1.4rem; color: var(--accent-color); font-family: var(--verse-font);">성경 및 장 선택
                </h2>
                <button id="close-selector" class="icon-btn">✕</button>
            </header>

            <div class="selector-dual-container"
                style="display: flex; flex: 1; overflow: hidden; gap: 1rem; border-top: 1px solid rgba(0,0,0,0.05); padding-top: 1rem;">
                <!-- Left: Books List -->
                <div class="selector-pane books-pane"
                    style="flex: 1; overflow-y: auto; border-right: 1px solid rgba(0,0,0,0.05); padding-right: 10px;">
                    <div id="selector-books" class="selector-vertical-list">
                        <!-- Books will be here -->
                    </div>
                </div>

                <!-- Right: Chapters Grid -->
                <div class="selector-pane chapters-pane"
                    style="flex: 1.5; overflow-y: auto; display: flex; flex-direction: column;">
                    <h3 id="selected-book-title"
                        style="font-size: 1.1rem; margin-bottom: 1rem; color: var(--accent-color); text-align: center; font-weight: 600;">
                        성경을 선택해 주세요</h3>
                    <div id="selector-chapters" class="selector-grid chapter-grid-dynamic">
                        <!-- Chapters will be here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Search Overlay -->
    <div id="search-results-overlay" class="hidden modal-overlay">
        <div class="modal-content glass-panel">
            <header>
                <h2>검색 결과</h2>
                <button id="close-search" class="icon-btn">✕</button>
            </header>
            <div id="search-results-list"></div>
        </div>
    </div>

    <script src="js/app.js?v=1.12" type="module"></script>
</body>

</html>